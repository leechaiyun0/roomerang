<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
</head>
<body>
<!-- âœ… ë„¤ë¹„ê²Œì´ì…˜ ë°” -->
<div class="navbar" th:fragment="navbar">
  <div class="logo">
    <a th:href="@{/}">
      <img th:src="@{/images/logo.png}" alt="ë¡œê³ ">
    </a>
  </div>
  <div class="nav-links">
    <a th:href="@{/board/rooms}">ë§¤ì¹­í•´ë°©</a>
    <a th:href="@{/share/list}">ë‚˜ëˆ”í•´ë°©</a>
  </div>
  <div class="header-right">
    <div class="icons">
      <a href="#"><img th:src="@{/images/chat.png}" alt="ì±„íŒ…"></a>
      <a href="#"><img th:src="@{/images/alarm.png}" alt="ì•Œë¦¼"></a>
      <a href="#"><img th:src="@{/images/my-page.png}" alt="ë‚´ì •ë³´"></a>
    </div>
    <div class="user-menu">
      <th:block th:if="${session.loginUser != null}">
        <span th:text="|${session.loginUser.name}ë‹˜|"></span>
        <img th:src="@{/images/plus.png}" alt="ë”ë³´ê¸°" class="toggle-button">
        <div class="dropdown-content">
          <a href="#">ë‚´ ì •ë³´</a>
          <a th:href="@{/favorites/list(userId=${loginUser.id})}">ê´€ì‹¬ ëª©ë¡</a>
          <a href="#">ë¦¬ë·° ë³´ê¸°</a>
          <a href="#" onclick="document.getElementById('logoutForm').submit(); return false;">ë¡œê·¸ì•„ì›ƒ</a>
          <form id="logoutForm" th:action="@{/auth/logout}" method="post" style="display: none;"></form>
        </div>
      </th:block>


      <script>
        /* ë“œë¡­ë‹¤ìš´ ë©”ë‰´ */
        document.addEventListener("DOMContentLoaded", function () {
          const userMenu = document.querySelector(".toggle-button");
          const dropdown = document.querySelector(".dropdown-content");

          userMenu.addEventListener("click", function (event) {
            event.stopPropagation();
            dropdown.style.display = dropdown.style.display === "block" ? "none" : "block";
          });

          document.addEventListener("click", function (event) {
            if (!userMenu.contains(event.target)) {
              dropdown.style.display = "none";
            }
          });
        });
      </script>

      <!-- ğŸ”¹ ë¡œê·¸ì¸í•˜ì§€ ì•Šì€ ì‚¬ìš©ì -->
      <th:block th:unless="${session.loginUser != null}">
        <a th:href="@{/auth/login}">ë¡œê·¸ì¸ í•´ì£¼ì„¸ìš”</a>
      </th:block>
    </div>
  </div>
</div>
</body>
</html>
